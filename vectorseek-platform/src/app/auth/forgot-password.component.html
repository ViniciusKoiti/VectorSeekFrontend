<section class="auth-page">
  <header>
    <h1>{{ 'auth.forgotPassword.title' | translate }}</h1>
    <p>{{ 'auth.forgotPassword.subtitle' | translate }}</p>
  </header>

  <!-- Mensagem de sucesso -->
  <div class="success-message" *ngIf="successMessage">
    <span class="success-icon">✓</span>
    <div>
      <strong>{{ 'auth.forgotPassword.successMessage' | translate }}</strong>
      <p>{{ successMessage }}</p>
    </div>
  </div>

  <form [formGroup]="forgotPasswordForm" (ngSubmit)="onSubmit()" class="auth-form" *ngIf="!successMessage">
    <!-- Mensagem de erro geral da API -->
    <div class="api-error" *ngIf="apiError">
      <span class="error-icon">⚠</span>
      <div>
        <strong>{{ apiError.summary }}</strong>
        <p *ngIf="apiError.description">{{ apiError.description }}</p>
        <p *ngIf="apiError.retryAfterSeconds" class="retry-info">
          {{ 'auth.apiErrors.retryAfter' | translate: { seconds: apiError.retryAfterSeconds } }}
        </p>
      </div>
    </div>

    <!-- Campo Email -->
    <div class="form-field">
      <label for="email">{{ 'auth.forgotPassword.emailLabel' | translate }}</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        [placeholder]="'auth.forgotPassword.emailPlaceholder' | translate"
        [class.invalid]="emailControl.invalid && emailControl.touched"
        autocomplete="email"
      />
      <app-field-error [control]="emailControl" fieldName="email"></app-field-error>
    </div>

    <!-- Botão Submit -->
    <button type="submit" class="btn-primary" [disabled]="forgotPasswordForm.invalid || isSubmitting">
      {{ isSubmitting ? ('auth.forgotPassword.submittingButton' | translate) : ('auth.forgotPassword.submitButton' | translate) }}
    </button>
  </form>

  <footer class="auth-footer">
    <a routerLink="/auth/login">{{ 'auth.forgotPassword.loginLink' | translate }}</a>
  </footer>
</section>
