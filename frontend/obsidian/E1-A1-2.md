---
id: E1-A1-2
epic: "Épico 1 — Fundação de Autenticação & Shell da Aplicação"
parent: E1-A1
status: backlog
tags:
  - frontend
  - angular
  - autenticacao
  - data-access
  - obsidian/backlog
dependencies:
  - E1-A1-1
obsidian-link: "[[E1-A1-2 Implementar serviços e modelos de autenticação]]"
---

# E1-A1-2 · Implementar serviços e modelos de autenticação

## Objetivo
Centralizar as integrações HTTP do domínio de autenticação em `libs/data-access`, expondo contratos tipados para consumo pelos componentes do módulo `auth`.

## Escopo
- Criar diretório `libs/data-access/src/lib/auth` com `auth.service.ts`, `auth.models.ts` e `auth.api.ts`.
- Implementar métodos `login`, `register`, `requestMagicLink`, `refresh` e `me` utilizando `HttpClient` e tipos derivados das interfaces documentadas no ADR-001.
- Configurar tratamentos de erro padronizados (`HttpErrorResponse`) convertendo mensagens de API em estrutura amigável para UI.
- Preparar providers com `inject(HttpClient)` seguindo abordagem standalone e compatível com SSR.

## Critérios de aceite
- Testes unitários em `auth.service.spec.ts` cobrindo fluxo feliz e principais falhas (401, 429, 422).
- Interfaces e tipos exportados de `auth.models.ts` reaproveitáveis em outros módulos.
- Serviço registrado em `libs/data-access/src/index.ts` (ou arquivo barrel equivalente) para consumo externo.

## Evidências esperadas
- Arquivos de teste demonstrando uso de `HttpClientTestingModule` e `HttpTestingController`.
- Documentação no PR justificando aderência ao ADR-001 e apontando futuras extensões (Signal Store).
- Cobertura de testes mínima de 70% para o diretório `auth` reportada em `nx test` ou ferramenta equivalente.
