---
id: E5-A4
epic: "Épico 5 — Chat Conversacional & Experiências Multimodais"
status: backlog
tags:
  - frontend
  - angular
  - chat
  - ux
  - obsidian/backlog
dependencies:
  - E5-A3
obsidian-link: "[[E5-A4 Implementar visão de conversa]]"
---

# E5-A4 · Implementar visão de conversa

## Descrição técnica
- Criar `ConversationViewComponent` com layout responsivo (`flex`, `gap`, suporte mobile) em `apps/platform/src/app/chat`.
- Renderizar mensagens agrupadas por data com pipe `groupByDay` e componentes `MessageBubbleComponent` (role → avatar/cor).
- Integrar `MessageComposerComponent` com `ReactiveFormsModule`, validação de tamanho máximo e barra de ferramentas (atalhos markdown, anexos futuros).
- Implementar autoscroll ao receber novas mensagens usando `ViewChildren` + `cdkScrollable`.
- Integrar `ChatStore` para envio (`sendMessage`) e carregamento incremental (paginado) via `loadOlderMessages`.
- Tratar erros com `MatSnackBar` e indicador de envio (`isSending` spinner no botão).

## Dependências
- `E5-A3` (lista de conversas ativa).

## Critérios de aceite
- Mensagens enviadas aparecem imediatamente com placeholder de streaming quando backend demora.
- Layout adapta-se a telas pequenas sem sobreposição.
- Erros de envio exibem toast e mantêm conteúdo no composer para retry.

## Checklist sugerido
- [ ] Criar componentes de mensagem e pipes auxiliares.
- [ ] Construir template e estilos responsivos.
- [ ] Integrar composer ao store e tratar loading/erros.
- [ ] Implementar autoscroll e carregamento incremental.
- [ ] Adicionar testes de componente com cenários de sucesso/erro.
