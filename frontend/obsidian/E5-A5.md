---
id: E5-A5
epic: "Épico 5 — Chat Conversacional & Experiências Multimodais"
status: backlog
tags:
  - frontend
  - angular
  - chat
  - modelos
  - obsidian/backlog
dependencies:
  - E5-A4
  - E6-base-model-catalog
obsidian-link: "[[E5-A5 Seleção de modelo por mensagem]]"
---

# E5-A5 · Seleção de modelo por mensagem

## Descrição técnica
- Criar `ModelSelectorComponent` standalone reutilizável em `apps/platform/src/app/chat/components`.
- Consumir `ModelCatalogStore` (épico 6) para listar modelos habilitados, aplicando filtros por capacidade e plano do usuário.
- Integrar selector ao `MessageComposerComponent`, persistindo escolha por conversa (`ChatStore.setPreferredModel`).
- Desabilitar opções indisponíveis com tooltip explicando motivo (plano insuficiente, indisponível).
- Garantir que payload enviado ao backend inclua `modelId` e que UI reflita modelo ativo em mensagens renderizadas.
- Adicionar testes unitários simulando usuários com planos diferentes.

## Dependências
- `E5-A4` (composer disponível) e entrega inicial do catálogo de modelos (épico 6).

## Critérios de aceite
- Usuário consegue escolher modelo por mensagem e visualiza seleção persistida ao reabrir conversa.
- Restrição por plano aplicada corretamente conforme dados do backend.
- Testes validam fallback para modelo padrão quando nenhum é selecionado.

## Checklist sugerido
- [ ] Implementar componente selector com filtros e estado de carregamento.
- [ ] Integrar com store para persistir seleção.
- [ ] Atualizar composer e payload de envio.
- [ ] Exibir modelo nas mensagens renderizadas.
- [ ] Criar testes para cenários de planos diferentes.
