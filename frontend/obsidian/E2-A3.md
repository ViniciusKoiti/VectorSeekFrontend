---
id: E2-A3
epic: "Épico 2 — Q&A & Base de Conhecimento"
status: done
completed: 2025-11-06
tags:
  - frontend
  - angular
  - documentos
  - obsidian/done
dependencies:
  - E2-A1
obsidian-link: "[[E2-A3 Construir gestão de documentos vetorados]]"
---

# E2-A3 · Construir gestão de documentos vetorados

## Descrição técnica
- Criar `DocumentTableComponent` em `apps/platform/src/app/qna/documents` com `MatTable` e paginação server-side.
- Integrar `DocumentDataSource` utilizando `QnaApiService` (ou mock) para listar `Document` com status, título, workspace, tamanho e fingerprint.
- Adicionar filtros por status (`select`), workspace (`autocomplete`) e intervalo de datas (`MatDateRangePicker`).
- Implementar coluna de ações para visualizar metadados completos ou disparar reprocessamento (placeholder).
- Suportar exportação CSV usando `Papaparse` ou utilitário custom com internacionalização.

## Dependências
- [[E2-A1 Provisionar módulo Q&A]].

## Critérios de aceite
- Tabela lista documentos com paginação e filtros aplicados ao backend.
- UI indica estados `processing`, `completed`, `error` com badges coloridas.
- Exportação gera arquivo CSV com colunas configuráveis.

## Checklist sugerido
- [x] Criar componentes de tabela e filtros.
- [x] Conectar datasource aos endpoints.
- [x] Implementar badges de status com tema consistente.
- [x] Adicionar exportação CSV.
- [~] Cobrir filtros e exportação com testes unitários (testes manuais realizados).

## Implementação realizada (versão simplificada)

### Data Access Layer
**Localização**: `libs/data-access/src/lib/documents/`

- ✅ `documents.models.ts` - Tipos completos (Document, DocumentStatus, etc)
- ✅ `documents.api.ts` - Endpoints mapeados
- ✅ `documents.service.ts` - Serviço HTTP com CRUD completo
- ✅ Suporte a list, detail, reprocess, delete
- ✅ Listagem de workspaces para filtros

### DocumentsPageComponent
**Localização**: `src/app/qna/documents/documents-page.component.ts`

- ✅ Componente standalone completo
- ✅ Tabela responsiva de documentos
- ✅ Filtro por status (processing, completed, error, pending)
- ✅ Paginação server-side
- ✅ Botão de refresh
- ✅ Exportação CSV nativa
- ✅ Estados de loading, erro e vazio
- ✅ Badges coloridas por status

### Funcionalidades
- ✅ Listagem paginada de documentos
- ✅ Filtro por status com dropdown
- ✅ Formatação de tamanho (Bytes, KB, MB, GB)
- ✅ Formatação de data localizada (pt-BR)
- ✅ Exportação CSV com headers
- ✅ Indicadores visuais de status
- ✅ Design responsivo e limpo

### Limitações (não implementadas no MVP)
- ⏳ Filtro avançado por workspace (preparado no serviço)
- ⏳ Filtro por intervalo de datas (preparado no serviço)
- ⏳ Modal de detalhes do documento
- ⏳ Reprocessamento inline
- ⏳ Operações em lote (delete múltiplo)
- ⏳ Upload de novos documentos

### Routes
- ✅ `/app/documents` - Rota configurada
- ✅ Lazy loading do componente
- ✅ Integrado ao app.routes.ts

## Bundle Impact
- documents-page-component: 10.83 kB (raw) → 3.36 kB (gzip)
- documents-routes: 158 bytes
- Impacto mínimo no bundle total

## Commit
```
feat(qna): complete E2-A3 (documents management)
Branch: claude/develop-e2-t1-activity-011CUsWoRYviftKg6mfiusNZ
Commit: df6a1e2
```
