---
id: E4-A2
epic: "Épico 4 — Dashboard Operacional & Quotas"
status: backlog
tags:
  - frontend
  - angular
  - dashboard
  - obsidian/backlog
dependencies:
  - E4-A1
obsidian-link: "[[E4-A2 Visualizar custos por provedor]]"
---

# E4-A2 · Visualizar custos por provedor

## Descrição técnica
- Construir `CostChartComponent` utilizando `ng2-charts` (Chart.js) para exibir custos por provedor/modelo com dados de `/api/costs/summary`.
- Implementar serviço `CostAnalyticsService` com cache através de Signal Store (`libs/state/costs`).
- Permitir alternar entre visualizações (barra empilhada, linha temporal) e exportar gráfico como imagem (`toBase64Image`).
- Tratar cenários sem dados exibindo mensagem com CTA para configurar coleta.
- Documentar integração com backend (Redis + banco) e estratégias de fallback.

## Dependências
- [[E4-A1 Construir módulo de dashboard operacional]].

## Critérios de aceite
- Gráficos renderizam dados agregados e atualizam com filtros de data/provedor.
- Exportação gera imagem PNG para relatório.
- Fallback exibe estado amigável quando endpoint indisponível (503).

## Checklist sugerido
- [ ] Criar componente de gráfico e serviço de custos.
- [ ] Implementar filtros e troca de visualização.
- [ ] Adicionar exportação de gráfico.
- [ ] Tratar estados sem dados/erro.
- [ ] Criar testes unitários e visuais (Storybook).
